<!DOCTYPE html>

<head>

	<title>To-Do List</title>

	<link rel="stylesheet" href="/main.css" />


</head>

<body>

	<div class="container">
		<h2>To-Do List </h2>
        <form class="form" action="/" method="POST">
            <input type="text" class="input" name="task" id="input-box" placeholder="add your task"/>
            <input type="submit" class="add" value="Add Task" />
        </form>
	</div>
	<div class="tasks">
	<% if(arrTask){ %>
		<% arrTask.forEach(element=> { %>
	  <div class="task">
		<%= element.task %>
		<a class="del <%= element._id %>" >Delete</a>
		 </div>
		 <% }); %>	
	 <% } %>
	</div>
	
	<button class="delete-all"><div>Delete all</div></button>
	</div>
<script>
	//delete one
	 const btn = document.querySelectorAll(".del");
	 btn.forEach( (button,i)=>{
	 button.addEventListener("click",()=>{
	 		const endp=`/${button.classList[1]}`
	 	    fetch(endp,{method:"DELETE"})

			 window.location.href="/"
	 })
	
	})
	
	//delete all
			 const bt = document.querySelector(".delete-all")
	 	    bt.addEventListener("click",async ()=>{
	 		const endp=`/`
	 		await fetch(endp,{method:"DELETE"})
			 .then((response) => {console.log(response)})
			 .catch((error) => {console.log(error)})
			 window.location.href="/"
		})
	
</script>
</body>



</html>